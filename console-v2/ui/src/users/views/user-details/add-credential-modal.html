<!--
/*******************************************************************************
* Copyright (c) 2016, 2017 Eurotech and/or its affiliates                       
*                                                                               
* All rights reserved. This program and the accompanying materials              
* are made available under the terms of the Eclipse Public License v1.0         
* which accompanies this distribution, and is available at                      
* http://www.eclipse.org/legal/epl-v10.html                                     
*                                                                               
* Contributors:                                                                 
*     Eurotech - initial API and implementation                                 
*                                                                               
*******************************************************************************/
-->
<div class="modal-header">
    <h3 class="modal-title">{{vm.editCredentialID ? 'Edit ' + vm.credential.name + ' credential': 'Add new credential'}}</h3>
</div>
<div class="modal-body">
    <div class="form-horizontal" ng-form="vm.editorForm">
        <h4 class="modal-title">{{vm.editCredentialID ? 'Modify the Credentials for the selected User.' : 'Create a new Credentials and associate it to the selected User. Password are manually. API Keys will be automatically generated.'}}</h4>
        <hr style="margin-top: 0px;">
        <div class="form-group">
            <label class="col-md-3 control-label" for="userInput"> User:</label>
            <div class="col-md-9">
                <input type="text" name="usernameInput" id="textInput-markup" class="form-control" ng-model="vm.submitModel.user"  ng-disabled="true">
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-3 control-label" for="credentialTypeInput"> Credential Type:</label>
            <div class="col-md-9">
                <select ng-disabled="vm.editCredentialID" name="credentialTypeInput" class="combobox form-control" ng-model="vm.submitModel.type" name="statusDropdown">
                    <option value="PASS">PASSWORD</option>
                    <option value="API_KEY">API_KEY</option>
                </select>
            </div>
        </div>
        <div ng-if="vm.editCredentialID" class="form-group">
            <label class="col-md-3 control-label" for="passwordInput">New Password:</label>
            <div class="col-md-9">
                <input type="password" name="passwordInput" id="textInput-markup" class="form-control" ng-model="vm.password" ng-change="vm.onChangeConfirmPassword()">
            </div>
        </div>
        <div ng-if="vm.editCredentialID" class="form-group" ng-class="{'has-error' : (!vm.editorForm.confirmInput.$valid && vm.editorForm.confirmInput.$touched) || (!vm.validPassword && vm.confirmPassword.length)}">
            <label class="col-md-3 control-label" for="confirmInput"> Confirm New Password:</label>
            <div class="col-md-9">
                <input type="password" name="confirmInput" id="textInput-markup" class="form-control" ng-model="vm.confirmPassword" ng-change="vm.onChangeConfirmPassword()" ng-required="vm.password.length">              
                <span ng-if="!vm.validPassword && vm.confirmPassword.length" class="help-block">
                  <span class="fa fa-exclamation-triangle" ></span> Password doesn't match the confirm password!</span>                                    
                <span ng-if="!vm.editorForm.confirmInput.$valid && vm.editorForm.confirmInput.$touched" class="help-block">
                  <span class="fa fa-exclamation-triangle" ></span> This field is required</span>                                    
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-3 control-label" for="expDate">Expiration Date:</label>
            <div class="col-md-9">
                <input name="expDate" pf-datepicker options="vm.dpOptions" date="vm.expirationDate">
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-3 control-label" for="statusInput"> Status:</label>
            <div class="col-md-9">
                <select name="statusInput" class="combobox form-control" ng-model="vm.submitModel.status" name="statusDropdown">
                    <option value="ENABLED">ENABLED</option>
                    <option value="DISABLED">DISABLED</option>
                </select>
            </div>
        </div>
    </div>
</div>
<div class="modal-footer">
    <button class="btn {{vm.editCredentialID ? 'btn-warning' : 'btn-success'}}" ng-click="vm.ok()" ng-disabled="!vm.validPassword">{{vm.editCredentialID ? 'Update' : 'Create'}}</button>
    <button class="btn btn-default" ng-click="vm.cancel()">Cancel</button>
</div>